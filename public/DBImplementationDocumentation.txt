> Database Path chosen

    Use PostgreSQL locally

    Use Prisma + Next.js API routes

    Host DB on Neon later (Or Prisma?)

    Use transactions for seat booking

    Explain constraints + isolation in report

----------------------------------------
*** Use transactions for seat booking

â€œSeat booking is implemented using database 
transactions to prevent race conditions and 
ensure isolation.â€

> pgSQL Example:
    BEGIN;

    SELECT seat_number
    FROM Seat
    WHERE trip_id = 1 AND seat_number IN (5,6)
    FOR UPDATE;

    UPDATE Seat
    SET status = 'sold'
    WHERE trip_id = 1 AND seat_number IN (5,6);

    INSERT INTO Ticket (...);

    COMMIT;

> prisma Example:
await prisma.$transaction(async (tx) => {
  const seats = await tx.seat.findMany({
    where: { tripId, number: { in: seatNumbers }, status: "available" }
  });

  if (seats.length !== seatNumbers.length)
    throw new Error("Seat already booked");

  await tx.seat.updateMany({
    where: { tripId, number: { in: seatNumbers } },
    data: { status: "sold" }
  });

  await tx.ticket.create({ data: {...} });
});

----------------------------------------



